(function(a,b){define(["IO/IO","utils/QueryString"],function(b,c){var d=a.alert,e=Backbone.Model.extend({defaults:{isConnected:!1,isMounted:!1,hasSDCard:!1,hasEmulatedSD:!1,isUSB:!1,isWifi:!1,isInternet:!1,SDKVersion:0,productId:"",isRoot:!1,deviceName:"",screen:new Backbone.Model,build:new Backbone.Model},initialize:function(){this.on("change:isConnected",function(a,c){c&&(b.requestAsync("wdj://device/screen.json").done(function(a){a.state_code===200&&this.get("screen").set({height:a.body.height,width:a.body.width,rotation:a.body.rotation,pixelFormat:a.body.pixel_format,refreshRate:a.body.refresh_rate})}.bind(this)),b.requestAsync("wdj://device/build.json").done(function(a){a.state_code===200&&this.get("build").set({brand:a.body.brand,device:a.body.device,display:a.body.display,manufacturer:a.body.manufacturer,model:a.body.model,product:a.body.product,release:a.body.release,sdk:a.body.sdk})}.bind(this)),b.requestAsync("wdj://device/features.json").done(function(a){a.state_code===200&&this.set("features",a.body.value)}.bind(this)))},this),b.requestAsync("wdj://device/state.json").done(function(a){a.state_code===200&&this.changeHandler(a.body)}.bind(this)),b.onmessage({"data.channel":"device.state_changed"},this.changeHandler,this)},changeHandler:function(a){this.set({isConnected:a.connection_state,isMounted:a.mmount_state===1?!0:!1,hasSDCard:a.mmount_state===2?!1:!0,hasEmulatedSD:!a.has_non_emulated_external_storage,isUSB:a.type===1,isWifi:a.type===3,isInternet:a.type===4,SDKVersion:a.sdk_version,productId:a.product_id,isRoot:a.is_root,deviceName:a.device_name})}}),f=new e;return f})})(this)