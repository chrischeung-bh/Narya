(function(a,b){define(["utils/SetImmediate"],function(b){console.log("BackendSocket - File loaded.");var c=a.setTimeout,d=a.clearTimeout,e=a.setImmediate,f=0,g=1,h=2,i=3,j=/^wdjs\:\/\//i,k=function(b){var c=this,d=f,k,l,m,n;if(!j.test(b))throw new Error('URL should be started with "wdjs://"');Object.defineProperty(this,"readyState",{get:function(){return d}}),Object.defineProperty(this,"extensions",{value:""}),Object.defineProperty(this,"protocol",{value:""}),Object.defineProperty(this,"onopen",{get:function(){return k},set:function(a){return k=a,c}}),Object.defineProperty(this,"onerror",{get:function(){return l},set:function(a){return l=a,c}}),Object.defineProperty(this,"onclose",{get:function(){return m},set:function(a){return m=a,c}}),Object.defineProperty(this,"onmessage",{get:function(){return n},set:function(a){return n=a,c}}),this.close=function(){if(d===h||d===i)return;d=h,e(function(){d=i,typeof m=="function"&&m()})},this.send=function(){throw new Error("send is disabled and not implemented in BackendSocket")},e(function(){if(d!==f)return;a.OneRingStreaming("*",function(a,b,c){typeof n=="function"&&!!b&&!!c&&n({data:{deviceId:a,channel:b,data:c}})}),d=g,typeof k=="function"&&k()})};return k})})(this)